\doxysubsection{Trade.\+hpp}
\hypertarget{_trade_8hpp_source}{}\label{_trade_8hpp_source}\index{Trade.hpp@{Trade.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2023\ Devexperts\ LLC.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MPL-\/2.0}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma}\ \textcolor{preprocessor}{once}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../../internal/Conf.hpp"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{<}\textcolor{preprocessor}{cassert}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{<}\textcolor{preprocessor}{cstdint}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{<}\textcolor{preprocessor}{memory}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{<}\textcolor{preprocessor}{string}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../../internal/Common.hpp"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../EventTypeEnum.hpp"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \textcolor{preprocessor}{"{}../LastingEvent.hpp"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{_market_event_8hpp}{"{}MarketEvent.hpp"{}}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include}\ \mbox{\hyperlink{_trade_base_8hpp}{"{}TradeBase.hpp"{}}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace}\ dxfcpp\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{struct}\ EventMapper;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{/**}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ Trade\ event\ is\ a\ snapshot\ of\ the\ price\ and\ size\ of\ the\ last\ trade\ during\ regular\ trading\ hours}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ and\ an\ overall\ day\ volume\ and\ day\ turnover.}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ It\ represents\ the\ most\ recent\ information\ that\ is\ available\ about\ the\ regular\ last\ trade\ on\ the\ market}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ at\ any\ given\ moment\ of\ time.}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *\ <h3>Trading\ sessions</h3>}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ *\ The\ Trade\ event\ defines\ last\ trade\ @ref\ ::getPrice()\ "{}price"{}\ as\ officially\ defined}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ by\ the\ corresponding\ exchange\ for\ its\ <b>regular\ trading\ hours</b>\ (RTH).}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ It\ also\ include\ an\ official\ exchange\ @ref\ ::getDayVolume()\ "{}dayVolume"{}\ and\ @ref\ ::getDayTurnover()\ "{}dayTurnover"{}}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *\ <b>for\ the\ whole\ trading\ day</b>\ identified\ by\ @ref\ ::getDayId()\ "{}dayId"{}.}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ So,\ Trade\ event\ captures\ all\ the\ official\ numbers\ that\ are\ typically\ reported\ by\ exchange.}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ *\ <p>Trades\ that\ happen\ in\ <b>extended\ trading\ hours</b>\ (ETH,\ pre-\/market\ and\ post-\/market\ trading\ sessions),}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ *\ which\ are\ typically\ defined\ for\ stocks\ and\ ETFs,\ do\ not\ update\ last\ trade\ @ref\ ::getTime()\ "{}time"{},}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ @ref\ ::getExchangeCode()\ "{}exchangeCode"{},\ @ref\ ::getPrice()\ "{}price"{},\ @ref\ ::getChange()\ "{}change"{},}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ @ref\ ::getSize()\ "{}size"{},\ and\ @ref\ ::getTickDirection()\ "{}tickDirection"{}\ in\ the\ Trade\ event,\ but\ they\ do\ update}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ *\ @ref\ ::getDayVolume()\ "{}dayVolume"{}\ and\ @ref\ ::getDayTurnover()\ "{}dayTurnover"{}.}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ <p>During\ extended\ trading\ hours\ a\ TradeETH\ event\ is\ generated\ on\ each\ trade\ with\ its}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ @ref\ TradeETH::isExtendedTradingHours()\ "{}extendedTradingHours"{}\ property\ set\ to\ \`{}true`.</p>}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ *\ <h3>Volume\ and\ Turnover</h3>}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ *\ <p>The\ volume\ and\ turnover\ are\ included\ into\ the\ Trade\ event\ instead}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ *\ of\ Summary\ event,\ because\ both\ volume\ and\ turnover\ typically\ update\ with\ each\ trade.}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ *\ The\ @ref\ ::getDayId()\ "{}dayId"{}\ field\ identifies\ current\ trading\ day\ for\ which\ volume\ and\ turnover\ statistics\ are\ computed.}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ *\ This\ solution\ avoids\ generation\ of\ multiple\ events\ on\ each\ trade\ during\ regular\ trading\ hours.}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ *\ Summary\ event\ is\ generated\ during\ the\ trading\ day\ only\ when\ new\ highs\ or\ lows\ are\ reached\ or\ other\ properties\ change.}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ *\ <p>Note\ that\ one\ can\ compute\ volume-\/weighted\ average\ price\ (VWAP)\ for\ a\ day\ by\ this\ formula:}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ *\ <br><code>vwap\ =\ @ref\ ::getDayTurnover()\ "{}dayTurnover"{}\ /\ @ref\ ::getDayVolume()\ "{}dayVolume"{};</code>}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ *\ <h3>Daily\ reset</h3>}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ *\ Daily\ reset\ procedure\ that\ happens\ on\ a\ schedule\ during\ non-\/trading\ hours\ resets\ Trade}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ *\ @ref\ ::getDayVolume()\ "{}dayVolume"{}\ and\ @ref\ ::getDayTurnover()\ "{}dayTurnover"{}\ to\ math::NaN}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ *\ and\ sets\ @ref\ ::getDayId()\ "{}dayId"{}\ to\ the\ next\ trading\ day\ in\ preparation\ to\ the\ next\ day's\ pre-\/market\ trading\ session}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ *\ (or\ for\ regular\ trading\ if\ there\ is\ no\ pre-\/market)\ while\ leaving\ all\ other\ properties\ intact.}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ *\ They\ reflect\ information\ about\ the\ last\ known\ RTH\ trade\ until\ the\ next\ RTH\ trade\ happens.}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ *\ <h3>Implementation\ details</h3>}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ *\ This\ event\ is\ implemented\ on\ top\ of\ QDS\ records\ \`{}Trade`\ and\ \`{}Trade\&X`}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ *\ for\ regional\ exchange\ trades.}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ *\ Regional\ records\ do\ not\ explicitly\ store\ a\ field\ for\ @ref\ \#getExchangeCode()\ "{}exchangeCode"{}\ property.}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00071\ \textcolor{keyword}{class}\ \mbox{\hyperlink{_conf_8hpp_a2247137e794d0adca60e1208433f3ec9}{DXFCPP\_EXPORT}}\ Trade\ \textcolor{keyword}{final}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdxfcpp_1_1_trade_base}{TradeBase}}\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct}\ EventMapper;}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<Trade>\ fromGraalNative(\textcolor{keywordtype}{void}\ *graalNative)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdxfcpp_1_1_event_type_enum}{EventTypeEnum}}\ \&TYPE;}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{///\ Creates\ new\ trade\ event\ with\ default\ values.}}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{classdxfcpp_1_1_trade_a01247f0dbddc302890382a6c1ef579ea}{Trade}}()\ \textcolor{keyword}{noexcept}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{/**}}
\DoxyCodeLine{00083\ \textcolor{comment}{\ \ \ \ \ *\ Creates\ new\ trade\ event\ with\ the\ specified\ event\ symbol.}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ *\ @param\ eventSymbol\ The\ event\ symbol.}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdxfcpp_1_1_trade_acd22a0117f9b19fc2869f8b6bd0ff222}{Trade}}(std::string\ eventSymbol)\ \textcolor{keyword}{noexcept}\ :\ \mbox{\hyperlink{classdxfcpp_1_1_trade_acd22a0117f9b19fc2869f8b6bd0ff222}{TradeBase}}(\mbox{\hyperlink{classdxfcpp_1_1_trade_acd22a0117f9b19fc2869f8b6bd0ff222}{std}}::\mbox{\hyperlink{classdxfcpp_1_1_trade_acd22a0117f9b19fc2869f8b6bd0ff222}{move}}(\mbox{\hyperlink{classdxfcpp_1_1_trade_acd22a0117f9b19fc2869f8b6bd0ff222}{eventSymbol}}))\ \{\}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{/**}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ *\ Returns\ a\ string\ representation\ of\ the\ current\ object.}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ *\ @return\ a\ string\ representation}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00094\ \ \ \ \ std::string\ \mbox{\hyperlink{classdxfcpp_1_1_trade_acf5865291043641274a0738e96bff2d0}{toString}}()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \mbox{\hyperlink{classdxfcpp_1_1_trade_acf5865291043641274a0738e96bff2d0}{override}};}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \}\ \textcolor{comment}{//\ namespace\ dxfcpp}}

\end{DoxyCode}
